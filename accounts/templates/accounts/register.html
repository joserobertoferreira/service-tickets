{% extends "core/base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block content %}

<div class="app-wrapper happy">

  {% include "core/partials/preloader.html" %}

  <!-- Menu Navigation starts -->
  {% include "core/partials/navbar.html" %}
  <!-- Menu Navigation ends -->

  <div class="app-content">
    <div class="">

      <!-- Header Section starts -->
      {% include "core/partials/header.html" %}
      <!-- Header Section ends -->

      <!-- Body main section starts -->
      <main>
        <div class="container-fluid">
          <!-- Form With Separator start -->
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h5>Crie sua conta</h5>
              </div>
              <div class="card-body">
                <form class="app-form" method="post">
                  {% csrf_token %}

                  <div class="row">
                    <div class="col-12">
                      <h5 class="mb-3">Identificação</h5>
                    </div>
                    <div class="col-6">
                      <div class="mb-3">
                        <label for="{{ form.username.id_for_label }}" class="form-label">{{ form.username.label }}</label>
                        {{ form.username }}
                        {% if form.username.help_text %}
                          <div class="mt-3">
                            <small class="text-info">{{ form.username.help_text }}</small>
                          </div>
                        {% endif %}
                        {% if form.username.errors %}
                          <div class="mt-3">
                            <small class="text-danger">{{ form.username.errors }}</small>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="mb-3">
                        <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label }}</label>
                        {{ form.email }}
                        {% if form.email.help_text %}
                          <div class="mt-3">
                            <small class="text-info">{{ form.email.help_text }}</small>
                          </div>
                        {% endif %}
                        {% if form.email.errors %}
                          <div class="mt-3">
                            <small class="text-danger">{{ form.email.errors }}</small>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="mb-3">
                        <label for="{{ form.first_name.id_for_label }}" class="form-label">{{ form.first_name.label }}</label>
                        {{ form.first_name }}
                        {% if form.first_name.help_text %}
                          <div class="mt-3">
                            <small class="text-info">{{ form.first_name.help_text }}</small>
                          </div>
                        {% endif %}
                        {% if form.first_name.errors %}
                          <div class="mt-3">
                            <small class="text-danger">{{ form.first_name.errors }}</small>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="mb-3">
                        <label for="{{ form.last_name.id_for_label }}" class="form-label">{{ form.last_name.label }}</label>
                        {{ form.last_name }}
                        {% if form.last_name.help_text %}
                          <div class="mt-3">
                            <small class="text-info">{{ form.last_name.help_text }}</small>
                          </div>
                        {% endif %}
                        {% if form.last_name.errors %}
                          <div class="mt-3">
                            <small class="text-danger">{{ form.last_name.errors }}</small>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="mb-3">
                        <label for="{{ form.first_name.id_for_label }}" class="form-label">{{ form.password1.label }}</label>
                        {{ form.password1 }}
                        {% if form.password1.help_text %}
                          <div class="mt-3">
                            <small class="text-info">{{ form.password1.help_text }}</small>
                          </div>
                        {% endif %}
                        {% if form.password1.errors %}
                          <div class="mt-3">
                            <small class="text-danger">{{ form.password1.errors }}</small>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="mb-3">
                        <label for="{{ form.password2.id_for_label }}" class="form-label">{{ form.password2.label }}</label>
                        {{ form.password2 }}
                        {% if form.password2.help_text %}
                          <div class="mt-3">
                            <small class="text-info">{{ form.password2.help_text }}</small>
                          </div>
                        {% endif %}
                        {% if form.password2.errors %}
                          <div class="mt-3">
                            <small class="text-danger">{{ form.password2.errors }}</small>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="app-divider-v dotted"></div>
                    </div>
                    <div class="col-12">
                      <h5 class="mb-3">Organização</h5>
                    </div>
                      
                    <div class="col-6">
                      <div class="mb-3">
                        <label for="{{ form.vat_number.id_for_label }}" class="form-label">{{ form.vat_number.label }}</label>
                        <input name="vat_number" autocomplete="off" class="form-control text-uppercase" hx-get="{% url 'accounts:search_customer' %}" hx-trigger="keyup changed delay:500ms" hx-target="#customer-name" hx-swap="innerHTML" />
                        {% if form.vat_number.help_text %}
                          <div class="mt-3">
                            <small class="text-info">{{ form.vat_number.help_text }}</small>
                          </div>
                        {% endif %}
                        {% if form.vat_number.errors %}
                          <div class="mt-3">
                            <small class="text-danger">{{ form.vat_number.errors }}</small>
                          </div>
                        {% endif %}
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="mb-3">
                        <label class="form-label">Empresa</label>
                        {% include 'accounts/partials/search_customer.html' %}
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="text-start">
                        Já possui uma conta? <a href="{% url 'accounts:login' %}" class="link-primary text-text-decoration-underline"> Login</a>
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="text-end">
                        <button type="submit" class="btn btn-primary">Registar</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <!-- Form With Separator end -->
        </div>
        <!-- default forms end -->
      </div>
    </main>

    <!-- Body main section ends -->

  </div>
</div>

</div>

<!-- tap on top -->
<div class="go-top">
<span class="progress-value">
  <i class="ti ti-arrow-up"></i>
</span>
</div>

<!-- essential -->

<!--customizer-->
{% include "core/partials/customizer.html" %}

{% include "core/partials/scripts.html" %}    

{% include "core/partials/scripts2.html" %}

{% endblock content %}
